{% extends 'base.html'%}
{% load custom_filter %}

{% block content %}
    <style type="text/css">
        .main {
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        .title {
            line-height: 15px;
            width: 800px;
            margin: 20px 0;
            padding: 20px 0;
            border-bottom: solid 1px rgba(0,0,0,.15);
        }
        .title h4 {
            margin: 0;
        }
        .box {
            max-width: 600px;
            margin-right: auto;
            margin-left: auto;
        }
        /*.box-title h5 {
            transform: translateY(30%);
        }*/
        .std-btn {
            outline: none;
            background-color: #1BB394;
            border-color: #1BB394;
            color: white;
            line-height: 20px;
            font-size: 15px;
            padding: 0 10px;
            border-radius: 5px;
            display: inline-block;
            margin-left: 15px;
            margin-bottom: 0;
            font-size: 8px;
            text-align: center;
            vertical-align: middle;
            touch-action: manipulation;
            cursor: pointer;
            background-image: none;
            border: 1px solid transparent;
            white-space: nowrap;
            text-decoration: none;
            transform: translateY(-3px);
        }
        .btn {
            border-radius: 3px;
            text-decoration: none;
            outline: none;
            cursor: pointer;
        }
        .btn-shadow {
            box-shadow: 1px 2px 3px #808080;
        }
        .btn-white {
            background-color: #fff;
            color: #808080;
            border: solid 1px #808080;
            float: right;
        }
        .btn-white:hover {
            background-color: #f3f3f3;
        }
        .btn-primary {
            background-color: #1BB394;
            color: #fff;
        }
        .btn-primary:hover {
            background-color: #18A387;   
        }
        .btn-m {
            line-height: 20px;
            padding: 5px 10px;
        }
        .btn-l {
            line-height: 20px;
            padding: 10px 50px;
        }
        .fixed {
            position: fixed;
            z-index: 100;
        }
        .right-top {
            top: 100px;
            right: 30px;
        }
        .btn-danger {
            background-color: #FC3737;
        }
        .star {
            color: #FFD700;
            margin-right: 5px;
        }
        #unfold {
            color: rgba(0,0,0,.53);
        }
        #unfold:hover {
            color: rgba(0,0,0,.9);
        }
    </style>
    <div class="main">
        <div class="title"><h4>我的修課心得</h4></div>
        {% if not comments %}
            <div style="color: rgba(0,0,0,.5);text-align: center;">快來新增你的心得吧～</div>
        {% endif %}
        {% for comment in comments %}
            <div class="box">
                <div class="box-title">
                    <h5>{{ comment.course.title_tw }} / {{ comment.course.teacher | replace:'[\u4e00-\u9fa5]+' }}</h5>
                    <div class="box-tool">
                        <a href="/course_comment/{{ comment.id }}/edit" class="std-btn">
                            <i class="fa fa-pencil" aria-hidden="true"></i>
                            修改心得
                        </a>
                        <a href="/course_comment/{{ comment.id }}/delete" class="std-btn btn-danger">
                            <i class="fa fa-trash-o" aria-hidden="true"></i>
                            刪除心得
                        </a>
                    </div>
                </div>
                <div class="box-content">
                    <h3>{{ comment.title }}</h3>
                    <div>
                        甜度：{{ comment.sweety }} <i class="fa fa-star star" aria-hidden="true"></i>
                        涼度：{{ comment.cold }} <i class="fa fa-star star" aria-hidden="true" ></i>
                        深度：{{ comment.hardness }} <i class="fa fa-star star" aria-hidden="true" ></i>
                    </div>
                    <p id='unfold' style="cursor: pointer;">{{ comment.content | truncatetw | linebreaksbr }}</p>
                    <p id='hidden' style="display: none;cursor: pointer;">{{ comment.content | linebreaksbr }}</p>
                </div>
            </div>
        {% endfor %}
    </div>
    <a class="btn fixed right-top btn-primary btn-l btn-shadow" href="/course_comment/new"><i class="fa fa-plus" aria-hidden="true"></i> 新增心得</a>
    <script type="text/javascript">
        $('#unfold, #hidden').click(function() {
            $(this).toggle()
            if (this.id === 'unfold') {
                $(this).next().toggle()
            } else {
                $(this).prev().toggle()
            }
        })
        $('.std-btn.btn-danger').click(function(){
            let confirm = window.confirm('確定？')
            if (confirm !== true) {
                event.preventDefault()
            }
        })
    </script>
{% endblock %}