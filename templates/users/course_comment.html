{% extends 'base.html'%}
{% load static %}
{% load custom_filter %}

{% block content %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/ui/button.css' %}">
    <style type="text/css">
        .main {
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        .title {
            line-height: 15px;
            width: 800px;
            margin: 20px 0;
            padding: 20px 0;
            border-bottom: solid 1px rgba(0,0,0,.15);
        }
        .box-title {
            line-height: 46px;
            padding-top: 0px;
            padding-left: 20px;
            padding-right: 0px;
        }
        .btn {
            border-radius: 5px;
            margin-right: 10px;
        }
        .fixed {
            position: fixed;
            z-index: 100;
        }
        .right-top {
            top: 100px;
            right: 30px;
        }
        .star {
            color: #FFD700;
            margin-right: 5px;
        }
        #unfold {
            color: rgba(0,0,0,.53);
        }
        #unfold:hover {
            color: rgba(0,0,0,.9);
        }
        .default-text {
            color: rgba(0,0,0,.5);
            text-align: center;
        }
    </style>
    <div class="main">
        <a class="btn fixed right-top btn-main btn-xl btn-shadow" href="/course_comment/new"><i class="fa fa-plus" aria-hidden="true"></i> 新增心得</a>
        <div class="title"><div>我的修課心得</div></div>
        {% if not comments %}
            <div class="default-text">快來新增你的心得吧～</div>
        {% endif %}
        {% for comment in comments %}
            <div class="box">
                <div class="box-title">
                    <h5>{{ comment.course.title_tw }} / {{ comment.course.teacher | replace:'[\u4e00-\u9fa5]+' }}</h5>
                    <div class="box-tool">
                        <a href="/course_comment/{{ comment.id }}/edit" class="btn btn-xs btn-main">
                            <i class="fa fa-pencil" aria-hidden="true"></i>
                            修改心得
                        </a>
                        <a href="/course_comment/{{ comment.id }}/delete" class="btn btn-xs btn-danger">
                            <i class="fa fa-trash-o" aria-hidden="true"></i>
                            刪除心得
                        </a>
                    </div>
                </div>
                <div class="box-content">
                    <h3>{{ comment.title }}</h3>
                    <div>
                        甜度：{{ comment.sweety }} <i class="fa fa-star star" aria-hidden="true"></i>
                        涼度：{{ comment.cold }} <i class="fa fa-star star" aria-hidden="true" ></i>
                        難度：{{ comment.hardness }} <i class="fa fa-star star" aria-hidden="true" ></i>
                    </div>
                    <p id='unfold' style="cursor: pointer;">{{ comment.content | truncatetw | linebreaksbr }}</p>
                    <p id='hidden' style="display: none;cursor: pointer;">{{ comment.content | linebreaksbr }}</p>
                </div>
            </div>
        {% endfor %}
        {% include 'partial_template/_pagination.html' %}
    </div>
    <script type="text/javascript">
        $('#unfold, #hidden').click(function() {
            $(this).toggle()
            if (this.id === 'unfold') {
                $(this).next().toggle()
            } else {
                $(this).prev().toggle()
            }
        })
        $('.std-btn.btn-danger').click(function(){
            var confirm = window.confirm('確定？')
            if (confirm !== true) {
                event.preventDefault()
            }
        })
    </script>
{% endblock %}